{"primaryContentSections":[{"declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"},{"text":"<","kind":"text"},{"text":"State","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Action","kind":"genericParameter"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","kind":"typeIdentifier","preciseIdentifier":"s:s8SendableP"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","kind":"typeIdentifier","preciseIdentifier":"s:s8SendableP"}]}],"kind":"declarations"},{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"code":"LockmanDynamicConditionReducer","type":"codeVoice"},{"text":" provides unified condition evaluation for both","type":"text"},{"text":" ","type":"text"},{"text":"reducer-level and action-level exclusive processing with simplified API.","type":"text"}]},{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This reducer provides two independent levels of exclusive processing:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reducer-level"}],"type":"strong"},{"type":"text","text":": Automatic condition evaluation for all actions in the reducer"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Action-level"}]},{"text":": Individual lock method calls with their own conditions","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Both levels use the same simple pattern: condition evaluation + cancellable effect control."}]},{"type":"heading","text":"Usage Examples","level":2,"anchor":"Usage-Examples"},{"type":"heading","text":"Basic Usage","level":3,"anchor":"Basic-Usage"},{"type":"codeListing","code":["var body: some ReducerOf<Self> {","  Reduce { state, action in","    switch action {","    case .purchase(let amount):","      return self.lock(","        state: state,","        action: action,","        operation: { send in","          \/\/ Purchase operation","          await send(.purchaseCompleted)","        },","        boundaryId: CancelID.payment,","        lockCondition: { state, action in","          \/\/ Action-level condition","          guard state.balance >= amount else {","            return .cancel(MyError.insufficientBalance)","          }","          return .success","        }","      )","    default:","      return .none","    }","  }","  .lock(","    condition: { state, action in","      \/\/ Reducer-level condition","      switch action {","      case .purchase, .withdraw:","        guard state.isLoggedIn else {","          return .cancel(MyError.notAuthenticated)","        }","        return .success","      default:","        return .cancel(MyError.noLockRequired)  \/\/ Skip exclusive processing","      }","    },","    boundaryId: CancelID.auth","  )","}"],"syntax":"swift"}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer"},"kind":"symbol","hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman"]]},"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"type":"text","text":"A reducer that wraps another reducer with dynamic condition evaluation capabilities."}],"relationshipsSections":[{"identifiers":["doc:\/\/Lockman\/22ComposableArchitecture7ReducerP"],"title":"Conforms To","kind":"relationships","type":"conformsTo"}],"variants":[{"paths":["\/documentation\/lockman\/lockmandynamicconditionreducer"],"traits":[{"interfaceLanguage":"swift"}]}],"topicSections":[{"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:condition:boundaryId:lockFailure:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:condition:boundaryId:lockFailure:)"],"title":"Initializers","generated":true,"anchor":"Initializers"},{"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)"],"title":"Instance Methods","generated":true,"anchor":"Instance-Methods"},{"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations"],"title":"Default Implementations","generated":true,"anchor":"Default-Implementations"}],"metadata":{"symbolKind":"struct","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"roleHeading":"Structure","navigatorTitle":[{"kind":"identifier","text":"LockmanDynamicConditionReducer"}],"modules":[{"name":"Lockman"}],"title":"LockmanDynamicConditionReducer","role":"symbol","externalID":"s:7Lockman0A23DynamicConditionReducerV"},"sections":[],"references":{"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman","abstract":[{"type":"text","text":"Elegant exclusive control for user actions in The Composable Architecture applications."}],"title":"Lockman","type":"topic","role":"collection"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(_:condition:boundaryId:lockFailure:)":{"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(_:condition:boundaryid:lockfailure:)","title":"init(_:condition:boundaryId:lockFailure:)","abstract":[{"type":"text","text":"Initializes a reducer with required condition evaluation and boundary ID."}],"kind":"symbol","type":"topic","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"(("},{"kind":"keyword","text":"inout"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV","text":"Effect"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"condition"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO","text":"LockmanResult"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": any "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A10BoundaryIda","text":"LockmanBoundaryId"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?)"}],"role":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:condition:boundaryId:lockFailure:)"},"doc://Lockman/22ComposableArchitecture7ReducerP":{"identifier":"doc:\/\/Lockman\/22ComposableArchitecture7ReducerP","title":"ComposableArchitecture.Reducer","type":"unresolvable"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/reduce(into:action:)":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)","abstract":[],"role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"reduce","kind":"identifier"},{"text":"(","kind":"text"},{"text":"into","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"action","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Effect","preciseIdentifier":"s:22ComposableArchitecture6EffectV","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">","kind":"text"}],"type":"topic","kind":"symbol","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reduce(into:action:)","title":"reduce(into:action:)"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/Reducer-Implementations":{"kind":"article","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations","type":"topic","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reducer-implementations","role":"collectionGroup","abstract":[],"title":"Reducer Implementations"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(base:condition:boundaryId:lockFailure:)":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:condition:boundaryId:lockFailure:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"base"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Reduce","preciseIdentifier":"s:22ComposableArchitecture6ReduceV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"condition"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"LockmanResult","preciseIdentifier":"s:7Lockman0A6ResultO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": any "},{"kind":"typeIdentifier","text":"LockmanBoundaryId","preciseIdentifier":"s:7Lockman0A10BoundaryIda"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Send","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?)"}],"abstract":[{"type":"text","text":"Initializes the reducer with an existing Reduce instance."}],"role":"symbol","kind":"symbol","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(base:condition:boundaryid:lockfailure:)","title":"init(base:condition:boundaryId:lockFailure:)","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)":{"conformance":{"availabilityPrefix":[{"type":"text","text":"Available when"}],"conformancePrefix":[{"type":"text","text":"Conforms when"}],"constraints":[{"code":"State","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"Sendable","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Action","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"Sendable","type":"codeVoice"},{"type":"text","text":"."}]},"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"lock","kind":"identifier"},{"text":"<","kind":"text"},{"text":"B","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"state","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"action","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"priority","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:ScP","text":"TaskPriority","kind":"typeIdentifier"},{"text":"?, ","kind":"text"},{"text":"operation","kind":"externalParam"},{"text":": (","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"catch","kind":"externalParam"},{"text":": ((any ","kind":"text"},{"preciseIdentifier":"s:s5ErrorP","text":"Error","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":")?, ","kind":"text"},{"text":"lockFailure","kind":"externalParam"},{"text":": ((any ","kind":"text"},{"preciseIdentifier":"s:s5ErrorP","text":"Error","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":")?, ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"lockCondition","kind":"externalParam"},{"text":": ((","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:7Lockman0A6ResultO","text":"LockmanResult","kind":"typeIdentifier"},{"text":")?, ","kind":"text"},{"text":"fileID","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:s12StaticStringV","text":"StaticString","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"filePath","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:s12StaticStringV","text":"StaticString","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"line","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Su","text":"UInt","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"column","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Su","text":"UInt","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture6EffectV","text":"Effect","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">","kind":"text"}],"title":"lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/lock(state:action:priority:operation:catch:lockfailure:boundaryid:lockcondition:fileid:filepath:line:column:)","abstract":[{"type":"text","text":"Creates an effect with action-level condition evaluation and simplified exclusive processing."}],"kind":"symbol","type":"topic","role":"symbol"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer":{"title":"LockmanDynamicConditionReducer","kind":"symbol","abstract":[{"text":"A reducer that wraps another reducer with dynamic condition evaluation capabilities.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","type":"topic","url":"\/documentation\/lockman\/lockmandynamicconditionreducer","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LockmanDynamicConditionReducer"}],"navigatorTitle":[{"kind":"identifier","text":"LockmanDynamicConditionReducer"}],"role":"symbol"}}}