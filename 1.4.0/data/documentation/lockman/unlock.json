{"variants":[{"paths":["\/documentation\/lockman\/unlock"],"traits":[{"interfaceLanguage":"swift"}]}],"seeAlsoSections":[{"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/GettingStarted","doc:\/\/Lockman\/documentation\/Lockman\/BoundaryOverview","doc:\/\/Lockman\/documentation\/Lockman\/Lock","doc:\/\/Lockman\/documentation\/Lockman\/ChoosingStrategy","doc:\/\/Lockman\/documentation\/Lockman\/Configuration","doc:\/\/Lockman\/documentation\/Lockman\/ErrorHandling","doc:\/\/Lockman\/documentation\/Lockman\/DebuggingGuide"],"title":"Essentials","anchor":"Essentials","generated":true}],"sections":[],"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"url":"doc:\/\/Lockman\/documentation\/Lockman\/Unlock","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman"]]},"abstract":[{"type":"text","text":"Understanding the unlocking mechanism in Lockman."}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","anchor":"Overview","text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Unlocking in Lockman is a mechanism for properly releasing acquired locks. It ensures resource release and maintains system consistency in all situations, including after processing completion, error occurrence, or cancellation.","type":"text"}]},{"level":2,"type":"heading","anchor":"Specifications","text":"Specifications"},{"level":3,"type":"heading","anchor":"Automatic-Release","text":"Automatic Release"},{"type":"paragraph","inlineContent":[{"text":"When using ","type":"text"},{"overridingTitleInlineContent":[{"type":"text","text":"Reducer.lock"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Lock","type":"reference","overridingTitle":"Reducer.lock","isActive":true},{"text":" or ","type":"text"},{"overridingTitleInlineContent":[{"type":"text","text":"Effect.lock"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Lock","type":"reference","overridingTitle":"Effect.lock","isActive":true},{"text":", locks are automatically released at the following timings:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"On normal completion"}],"type":"strong"},{"type":"text","text":": When processing completes normally"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"On exception","type":"text"}]},{"type":"text","text":": When an error occurs"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"On cancellation"}]},{"type":"text","text":": When processing is cancelled"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"On early return","type":"text"}],"type":"strong"},{"text":": When processing ends prematurely","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Automatic release is implemented using defer blocks, ensuring that locks are reliably released regardless of the termination pattern."}]},{"level":3,"type":"heading","anchor":"Manual-Release","text":"Manual Release"},{"type":"paragraph","inlineContent":[{"text":"Manual release functionality has been removed in Lockman v1.3.0. All locks are now automatically managed when using ","type":"text"},{"type":"reference","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Lock","overridingTitleInlineContent":[{"text":"Reducer.lock","type":"text"}],"isActive":true,"overridingTitle":"Reducer.lock"},{"text":" or ","type":"text"},{"type":"reference","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Lock","overridingTitleInlineContent":[{"text":"Effect.lock","type":"text"}],"isActive":true,"overridingTitle":"Effect.lock"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For cases where you need fine-grained control over lock timing, use the "},{"type":"codeVoice","code":"unlockOption"},{"type":"text","text":" parameter to control when the automatic unlock occurs."}]},{"level":3,"type":"heading","anchor":"Release-Options","text":"Release Options"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Unlock execution timing can be controlled with LockmanUnlockOption:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"immediate","type":"text"}]},{"type":"text","text":": Release immediately upon processing completion"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"mainRunLoop"}]},{"text":": Release in the next main run loop cycle","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"transition"}],"type":"strong"},{"text":": Release after platform-specific screen transition animation completion","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"iOS: 0.35 seconds (push\/pop animation)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"macOS: 0.25 seconds (window and view animation)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"tvOS: 0.4 seconds (focus-driven transition)"}]}]},{"content":[{"inlineContent":[{"text":"watchOS: 0.3 seconds (page-based navigation)","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"delayed(TimeInterval)"}]},{"type":"text","text":": Release after specified time"}],"type":"paragraph"}]}]},{"level":2,"type":"heading","anchor":"Methods","text":"Methods"},{"level":3,"type":"heading","anchor":"Auto-release-with-Reducerlock-Recommended","text":"Auto-release with Reducer.lock (Recommended)"},{"syntax":"swift","type":"codeListing","code":["var body: some ReducerOf<Self> {","    Reduce { state, action in","        switch action {","        case .startWork:","            return .run { send in","                try await someAsyncWork()","                await send(.completed)","                \/\/ Lock is automatically released here","            }","            .catch { error, send in","                await send(.failed(error))","                \/\/ Automatically released after error handling","            }","        }","    }","    .lock(","        boundaryId: CancelID.feature,","        unlockOption: .immediate  \/\/ Configure unlock timing","    )","}"]},{"level":3,"type":"heading","anchor":"Auto-release-with-Effectlock","text":"Auto-release with Effect.lock"},{"syntax":"swift","type":"codeListing","code":["return .run { send in","    try await someAsyncWork()","    await send(.completed)","    \/\/ Lock is automatically released here","}",".catch { error, send in","    await send(.failed(error))","    \/\/ Automatically released after error handling","}",".lock(","    action: action,","    boundaryId: CancelID.feature,","    unlockOption: .transition  \/\/ Configure unlock timing",")"]}]}],"metadata":{"roleHeading":"Article","modules":[{"name":"Lockman"}],"role":"article","title":"Unlock"},"references":{"doc://Lockman/documentation/Lockman/BoundaryOverview":{"role":"article","kind":"article","title":"Boundary","abstract":[{"text":"Understand the concept of boundaries in Lockman.","type":"text"}],"url":"\/documentation\/lockman\/boundaryoverview","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/BoundaryOverview","type":"topic"},"doc://Lockman/documentation/Lockman/GettingStarted":{"abstract":[{"text":"Learn how to integrate Lockman into your TCA application.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/GettingStarted","url":"\/documentation\/lockman\/gettingstarted","type":"topic","kind":"article","title":"Getting Started","role":"article"},"doc://Lockman/documentation/Lockman/DebuggingGuide":{"kind":"article","abstract":[{"text":"Learn how to debug Lockman-related issues in your application.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/DebuggingGuide","role":"article","type":"topic","url":"\/documentation\/lockman\/debuggingguide","title":"Debugging Guide"},"doc://Lockman/documentation/Lockman/ChoosingStrategy":{"role":"article","kind":"article","title":"Choosing a Strategy","abstract":[{"text":"Learn how to select the right strategy for your use case.","type":"text"}],"url":"\/documentation\/lockman\/choosingstrategy","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/ChoosingStrategy","type":"topic"},"doc://Lockman/documentation/Lockman/Lock":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Lock","kind":"article","type":"topic","abstract":[{"text":"Understanding the locking mechanism in Lockman.","type":"text"}],"role":"article","title":"Lock","url":"\/documentation\/lockman\/lock"},"doc://Lockman/documentation/Lockman/ErrorHandling":{"role":"article","kind":"article","title":"Error Handling","abstract":[{"text":"Learn about common error handling patterns in Lockman.","type":"text"}],"url":"\/documentation\/lockman\/errorhandling","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/ErrorHandling","type":"topic"},"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","title":"Lockman","kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman","abstract":[{"text":"A library to implement exclusive control of user actions in application development using TCA.","type":"text"}],"type":"topic","role":"collection"},"doc://Lockman/documentation/Lockman/Configuration":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/Configuration","kind":"article","type":"topic","abstract":[{"text":"Configure Lockman for your applicationâ€™s needs.","type":"text"}],"role":"article","title":"Configuration","url":"\/documentation\/lockman\/configuration"}}}