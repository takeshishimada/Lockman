{"schemaVersion":{"patch":0,"major":0,"minor":3},"sections":[],"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman"]]},"identifier":{"url":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","interfaceLanguage":"swift"},"metadata":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"modules":[{"name":"Lockman"}],"title":"LockmanDynamicConditionReducer","symbolKind":"struct","roleHeading":"Structure","role":"symbol","externalID":"s:7Lockman0A23DynamicConditionReducerV","navigatorTitle":[{"kind":"identifier","text":"LockmanDynamicConditionReducer"}]},"relationshipsSections":[{"title":"Conforms To","kind":"relationships","identifiers":["doc:\/\/Lockman\/22ComposableArchitecture7ReducerP"],"type":"conformsTo"}],"abstract":[{"type":"text","text":"A reducer that wraps another reducer with dynamic condition evaluation capabilities."}],"kind":"symbol","topicSections":[{"anchor":"Initializers","title":"Initializers","identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:condition:boundaryId:lockFailure:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:condition:boundaryId:lockFailure:)"],"generated":true},{"anchor":"Instance-Methods","title":"Instance Methods","identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)"],"generated":true},{"anchor":"Default-Implementations","title":"Default Implementations","identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations"],"generated":true}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/lockman\/lockmandynamicconditionreducer"]}],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"},{"text":"<","kind":"text"},{"text":"State","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Action","kind":"genericParameter"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","preciseIdentifier":"s:s8SendableP","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","preciseIdentifier":"s:s8SendableP","kind":"typeIdentifier"}]}]},{"kind":"content","content":[{"type":"heading","level":2,"text":"Overview","anchor":"overview"},{"type":"paragraph","inlineContent":[{"code":"LockmanDynamicConditionReducer","type":"codeVoice"},{"text":" provides unified condition evaluation for both","type":"text"},{"text":" ","type":"text"},{"text":"reducer-level and action-level exclusive processing with simplified API.","type":"text"}]},{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This reducer provides two independent levels of exclusive processing:"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Reducer-level","type":"text"}],"type":"strong"},{"text":": Automatic condition evaluation for all actions in the reducer","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Action-level"}]},{"type":"text","text":": Individual lock method calls with their own conditions"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Both levels use the same simple pattern: condition evaluation + cancellable effect control."}]},{"type":"heading","level":2,"text":"Usage Examples","anchor":"Usage-Examples"},{"type":"heading","level":3,"text":"Basic Usage","anchor":"Basic-Usage"},{"type":"codeListing","syntax":"swift","code":["var body: some ReducerOf<Self> {","  Reduce { state, action in","    switch action {","    case .purchase(let amount):","      return self.lock(","        state: state,","        action: action,","        operation: { send in","          \/\/ Purchase operation","          await send(.purchaseCompleted)","        },","        boundaryId: CancelID.payment,","        lockCondition: { state, action in","          \/\/ Action-level condition","          guard state.balance >= amount else {","            return .cancel(MyError.insufficientBalance)","          }","          return .success","        }","      )","    default:","      return .none","    }","  }","  .lock(","    condition: { state, action in","      \/\/ Reducer-level condition","      switch action {","      case .purchase, .withdraw:","        guard state.isLoggedIn else {","          return .cancel(MyError.notAuthenticated)","        }","        return .success","      default:","        return .cancel(MyError.noLockRequired)  \/\/ Skip exclusive processing","      }","    },","    boundaryId: CancelID.auth","  )","}"]}]}],"references":{"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)":{"title":"lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"lock"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"B"},{"kind":"text","text":">("},{"kind":"externalParam","text":"state"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"externalParam","text":"action"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":", "},{"kind":"externalParam","text":"priority"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:ScP","text":"TaskPriority"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"operation"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":", "},{"kind":"externalParam","text":"catch"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"B"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockCondition"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A14StrategyResultO","text":"LockmanStrategyResult"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"fileID"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV","text":"StaticString"},{"kind":"text","text":", "},{"kind":"externalParam","text":"filePath"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV","text":"StaticString"},{"kind":"text","text":", "},{"kind":"externalParam","text":"line"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Su","text":"UInt"},{"kind":"text","text":", "},{"kind":"externalParam","text":"column"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Su","text":"UInt"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV","text":"Effect"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">"}],"conformance":{"conformancePrefix":[{"text":"Conforms when","type":"text"}],"constraints":[{"code":"State","type":"codeVoice"},{"text":" conforms to ","type":"text"},{"code":"Sendable","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"Action","type":"codeVoice"},{"text":" conforms to ","type":"text"},{"code":"Sendable","type":"codeVoice"},{"text":".","type":"text"}],"availabilityPrefix":[{"text":"Available when","type":"text"}]},"type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:operation:catch:lockFailure:boundaryId:lockCondition:fileID:filePath:line:column:)","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"Creates an effect with action-level condition evaluation and simplified exclusive processing."}],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/lock(state:action:priority:operation:catch:lockfailure:boundaryid:lockcondition:fileid:filepath:line:column:)"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/reduce(into:action:)":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)","title":"reduce(into:action:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"reduce","kind":"identifier"},{"text":"(","kind":"text"},{"text":"into","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"action","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture6EffectV","text":"Effect","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">","kind":"text"}],"role":"symbol","kind":"symbol","type":"topic","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reduce(into:action:)","abstract":[]},"doc://Lockman/documentation/Lockman":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman","type":"topic","url":"\/documentation\/lockman","abstract":[{"type":"text","text":"Elegant exclusive control for user actions in The Composable Architecture applications."}],"title":"Lockman","kind":"symbol","role":"collection"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/Reducer-Implementations":{"title":"Reducer Implementations","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations","role":"collectionGroup","type":"topic","abstract":[],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reducer-implementations","kind":"article"},"doc://Lockman/22ComposableArchitecture7ReducerP":{"title":"ComposableArchitecture.Reducer","identifier":"doc:\/\/Lockman\/22ComposableArchitecture7ReducerP","type":"unresolvable"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(base:condition:boundaryId:lockFailure:)":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:condition:boundaryId:lockFailure:)","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(base:condition:boundaryid:lockfailure:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"base"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6ReduceV","text":"Reduce"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"condition"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A14StrategyResultO","text":"LockmanStrategyResult"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": any "},{"kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A10BoundaryIda","text":"LockmanBoundaryId"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?)"}],"abstract":[{"type":"text","text":"Initializes the reducer with an existing Reduce instance."}],"type":"topic","role":"symbol","title":"init(base:condition:boundaryId:lockFailure:)","kind":"symbol"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer","type":"topic","role":"symbol","kind":"symbol","navigatorTitle":[{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"title":"LockmanDynamicConditionReducer","abstract":[{"text":"A reducer that wraps another reducer with dynamic condition evaluation capabilities.","type":"text"}]},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(_:condition:boundaryId:lockFailure:)":{"abstract":[{"type":"text","text":"Initializes a reducer with required condition evaluation and boundary ID."}],"role":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"((","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Effect","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"condition","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"LockmanStrategyResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A14StrategyResultO"},{"text":", ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": any ","kind":"text"},{"text":"LockmanBoundaryId","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A10BoundaryIda"},{"text":", ","kind":"text"},{"text":"lockFailure","kind":"externalParam"},{"text":": ((any ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":", ","kind":"text"},{"text":"Send","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")?)","kind":"text"}],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(_:condition:boundaryid:lockfailure:)","title":"init(_:condition:boundaryId:lockFailure:)","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:condition:boundaryId:lockFailure:)","type":"topic","kind":"symbol"}}}