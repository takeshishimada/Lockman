{"metadata":{"externalID":"s:7Lockman0A7ManagerO11acquireLock11lockmanInfo10boundaryId12unlockOptionAA0A6ResultOyxq_Gq__xAA0a6UnlockJ0OSgtKSHRzs8SendableRzAA0aF0R_r0_lFZ","title":"acquireLock(lockmanInfo:boundaryId:unlockOption:)","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"acquireLock","kind":"identifier"},{"text":"<","kind":"text"},{"text":"B","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"I","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"lockmanInfo","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"I","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"unlockOption","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"LockmanUnlockOption","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A12UnlockOptionO"},{"text":"?) ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"LockmanResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO"},{"text":"<","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"I","kind":"typeIdentifier"},{"text":">","kind":"text"}],"role":"symbol","extendedModule":"Lockman","roleHeading":"Type Method","modules":[{"name":"Lockman"}],"symbolKind":"method"},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanManager\/acquireLock(lockmanInfo:boundaryId:unlockOption:)","interfaceLanguage":"swift"},"sections":[],"abstract":[{"text":"Attempts to acquire a lock using pre-captured lockmanInfo for consistent uniqueId handling.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman","doc:\/\/Lockman\/documentation\/Lockman\/LockmanManager"]]},"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"acquireLock"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"B"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"I"},{"kind":"text","text":">("},{"kind":"externalParam","text":"lockmanInfo"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"I"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"B"},{"kind":"text","text":", "},{"kind":"externalParam","text":"unlockOption"},{"kind":"text","text":": "},{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanUnlockOption","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A12UnlockOptionO","text":"LockmanUnlockOption"},{"kind":"text","text":"? = nil) "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO","text":"LockmanResult"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"B"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"I"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"B"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"s:SH","text":"Hashable"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"B"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"s:s8SendableP","text":"Sendable"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"I"},{"kind":"text","text":" : "},{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanInfo","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A4InfoP","text":"LockmanInfo"}],"platforms":["macOS"],"languages":["swift"]}]},{"parameters":[{"name":"lockmanInfo","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Pre-captured lock information ensuring consistent uniqueId throughout lifecycle"}]}]},{"name":"boundaryId","content":[{"inlineContent":[{"text":"Boundary identifier for this lock and cancellation","type":"text"}],"type":"paragraph"}]}],"kind":"parameters"},{"kind":"content","content":[{"type":"heading","anchor":"return-value","text":"Return Value","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"LockmanResult indicating lock acquisition status"}]}]},{"kind":"content","content":[{"level":2,"text":"Lock Acquisition Protocol with UniqueId Consistency","type":"heading","anchor":"Lock-Acquisition-Protocol-with-UniqueId-Consistency"},{"type":"paragraph","inlineContent":[{"text":"This method implements the core lock acquisition logic with guaranteed uniqueId consistency:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Pre-captured LockmanInfo"}],"type":"strong"},{"type":"text","text":": Uses lockmanInfo captured once at entry points"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Feasibility Check","type":"text"}]},{"type":"text","text":": Call "},{"type":"codeVoice","code":"canLock"},{"type":"text","text":" to determine if lock can be acquired"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Early Exit","type":"text"}]},{"type":"text","text":": Return appropriate result if lock acquisition is not possible"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Lock Acquisition","type":"text"}],"type":"strong"},{"text":": Call ","type":"text"},{"code":"lock","type":"codeVoice"},{"text":" to actually acquire the lock","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Consistent UniqueId","type":"text"}],"type":"strong"},{"text":": Same lockmanInfo instance ensures unlock will succeed","type":"text"}],"type":"paragraph"}]}],"type":"orderedList"},{"text":"Boundary Lock Protection","level":2,"type":"heading","anchor":"Boundary-Lock-Protection"},{"inlineContent":[{"type":"text","text":"The entire lock acquisition process is protected by a boundary-specific lock"},{"type":"text","text":" "},{"type":"text","text":"to ensure atomicity and prevent race conditions between:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Multiple lock acquisition attempts"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Lock acquisition and release operations"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Cleanup and acquisition operations","type":"text"}]}]}],"type":"unorderedList"},{"text":"Cancellation Strategy","level":2,"type":"heading","anchor":"Cancellation-Strategy"},{"inlineContent":[{"text":"When ","type":"text"},{"code":"canLock","type":"codeVoice"},{"text":" returns ","type":"text"},{"code":".successWithPrecedingCancellation","type":"codeVoice"},{"text":":","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"A cancellation effect is created for the specified boundaryId"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The cancellation effect is concatenated BEFORE the main effect"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This ensures proper ordering: cancel existing â†’ execute new"}]}]}],"type":"orderedList"},{"text":"Performance Notes","level":2,"type":"heading","anchor":"Performance-Notes"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Lock feasibility check is typically O(1) hash lookup","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Boundary lock acquisition is brief (microseconds)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Effect concatenation has minimal overhead","type":"text"}]}]}],"type":"unorderedList"}]}],"kind":"symbol","variants":[{"paths":["\/documentation\/lockman\/lockmanmanager\/acquirelock(lockmaninfo:boundaryid:unlockoption:)"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman","abstract":[{"text":"Elegant exclusive control for user actions in The Composable Architecture applications.","type":"text"}],"role":"collection","title":"Lockman","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanManager":{"type":"topic","title":"LockmanManager","url":"\/documentation\/lockman\/lockmanmanager","kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanManager","abstract":[{"text":"A facade providing static access to the shared ","type":"text"},{"code":"LockmanStrategyContainer","type":"codeVoice"},{"text":" and core framework functionality.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"LockmanManager"}],"role":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"LockmanManager"}]},"doc://Lockman/documentation/Lockman/LockmanUnlockOption":{"kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanUnlockOption","title":"LockmanUnlockOption","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"LockmanUnlockOption"}],"navigatorTitle":[{"kind":"identifier","text":"LockmanUnlockOption"}],"abstract":[{"text":"Controls when unlock operations are executed.","type":"text"}],"url":"\/documentation\/lockman\/lockmanunlockoption"},"doc://Lockman/documentation/Lockman/LockmanResult":{"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanResult","kind":"identifier"}],"navigatorTitle":[{"text":"LockmanResult","kind":"identifier"}],"title":"LockmanResult","url":"\/documentation\/lockman\/lockmanresult","kind":"symbol","role":"symbol","type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanResult","abstract":[{"text":"The result of attempting to acquire a lock with integrated unlock capability.","type":"text"}]},"doc://Lockman/documentation/Lockman/LockmanInfo":{"type":"topic","title":"LockmanInfo","kind":"symbol","role":"symbol","url":"\/documentation\/lockman\/lockmaninfo","navigatorTitle":[{"text":"LockmanInfo","kind":"identifier"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanInfo","kind":"identifier"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanInfo","abstract":[{"type":"text","text":"Represents information required by Lockman locking strategies."}]},"doc://Lockman/documentation/Lockman/LockmanManager/acquireLock(lockmanInfo:boundaryId:unlockOption:)":{"type":"topic","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"acquireLock","kind":"identifier"},{"text":"<","kind":"text"},{"text":"B","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"I","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"lockmanInfo","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"I","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"unlockOption","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"LockmanUnlockOption","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A12UnlockOptionO"},{"text":"?) ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"LockmanResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO"},{"text":"<","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"I","kind":"typeIdentifier"},{"text":">","kind":"text"}],"url":"\/documentation\/lockman\/lockmanmanager\/acquirelock(lockmaninfo:boundaryid:unlockoption:)","role":"symbol","title":"acquireLock(lockmanInfo:boundaryId:unlockOption:)","abstract":[{"text":"Attempts to acquire a lock using pre-captured lockmanInfo for consistent uniqueId handling.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanManager\/acquireLock(lockmanInfo:boundaryId:unlockOption:)"}}}