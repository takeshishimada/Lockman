{"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman","doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer","doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer\/Reducer-Implementations"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/lockman\/lockmanreducer\/lock(condition:boundaryid:lockfailure:)"]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer\/lock(condition:boundaryId:lockFailure:)"},"kind":"symbol","sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"tokens":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"lock","kind":"identifier"},{"text":"(","kind":"text"},{"text":"condition","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"@escaping","kind":"keyword"},{"text":" (","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"State","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"LockmanStrategyResult","preciseIdentifier":"s:7Lockman0A14StrategyResultO","kind":"typeIdentifier","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanStrategyResult"},{"text":", ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": any ","kind":"text"},{"text":"LockmanBoundaryId","preciseIdentifier":"s:7Lockman0A10BoundaryIda","kind":"typeIdentifier","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanBoundaryId"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Send","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")? = nil) -> "},{"kind":"typeIdentifier","text":"LockmanDynamicConditionReducer","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","preciseIdentifier":"s:7Lockman0A23DynamicConditionReducerV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"Sendable","preciseIdentifier":"s:s8SendableP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"Sendable","preciseIdentifier":"s:s8SendableP"}],"languages":["swift"]}]},{"kind":"parameters","parameters":[{"content":[{"inlineContent":[{"type":"text","text":"A function that evaluates the current state and action"},{"type":"text","text":" "},{"type":"text","text":"to determine if exclusive processing should be applied."}],"type":"paragraph"}],"name":"condition"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Boundary identifier for exclusive processing."}]}],"name":"boundaryId"},{"content":[{"inlineContent":[{"text":"Optional handler for condition evaluation failures.","type":"text"}],"type":"paragraph"}],"name":"lockFailure"}]},{"kind":"content","content":[{"anchor":"return-value","text":"Return Value","level":2,"type":"heading"},{"inlineContent":[{"text":"A ","type":"text"},{"code":"LockmanDynamicConditionReducer","type":"codeVoice"},{"text":" reducer that evaluates conditions for exclusive processing","type":"text"}],"type":"paragraph"}]},{"kind":"content","content":[{"level":2,"type":"heading","anchor":"discussion","text":"Discussion"},{"inlineContent":[{"text":"This method enables dynamic lock condition evaluation based on the current state and action,","type":"text"},{"text":" ","type":"text"},{"text":"allowing for fine-grained control over when locks should be acquired.","type":"text"}],"type":"paragraph"},{"level":2,"type":"heading","anchor":"Overview","text":"Overview"},{"inlineContent":[{"text":"This method wraps the reducer with a ","type":"text"},{"code":"LockmanDynamicConditionReducer","type":"codeVoice"},{"text":" that provides two levels of lock condition control:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Reducer-level"}],"type":"strong"},{"type":"text","text":": Condition specified in this method that applies to all actions"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Action-level","type":"text"}]},{"text":": Condition specified per ","type":"text"},{"code":"lock","type":"codeVoice"},{"text":" call for specific actions within the reducer","type":"text"}],"type":"paragraph"}]}]},{"level":2,"type":"heading","anchor":"Example","text":"Example"},{"code":["var body: some ReducerOf<Self> {","  Reduce { state, action in","    switch action {","    case .purchase(let amount):","      return self.lock(","        state: state,","        action: action,","        operation: { send in","          \/\/ Purchase operation","        },","        lockAction: PurchaseAction(),","        boundaryId: CancelID.payment,","        lockCondition: { state, _ in","          \/\/ Action-level condition","          guard state.balance >= amount else {","            return .cancel(InsufficientFundsError())","          }","          return .success","        }","      )","    }","  }","  .lock { state, _ in","    \/\/ Reducer-level condition","    guard state.isAuthenticated else {","      return .cancel(NotAuthenticatedError())","    }","    return .success","  }","}"],"type":"codeListing","syntax":"swift"}]}],"abstract":[{"text":"Applies dynamic lock management to this reducer with conditional evaluation.","type":"text"}],"metadata":{"title":"lock(condition:boundaryId:lockFailure:)","modules":[{"relatedModules":["ComposableArchitecture"],"name":"Lockman"}],"roleHeading":"Instance Method","extendedModule":"ComposableArchitecture","role":"symbol","symbolKind":"method","externalID":"s:22ComposableArchitecture7ReducerP7LockmanE4lock9condition10boundaryId0E7FailureAD0d16DynamicConditionC0Vy5StateQz6ActionQzGAD0D14StrategyResultOAL_ANtYbc_SH_s8Sendablepys5Error_p_AA4SendVyANGtYaYbcSgtsArNRQsArLRQrlF::SYNTHESIZED::s:7Lockman0A7ReducerV","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"lock","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"condition"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"LockmanStrategyResult","preciseIdentifier":"s:7Lockman0A14StrategyResultO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": any "},{"kind":"typeIdentifier","text":"LockmanBoundaryId","preciseIdentifier":"s:7Lockman0A10BoundaryIda"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Send","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?) -> "},{"kind":"typeIdentifier","text":"LockmanDynamicConditionReducer","preciseIdentifier":"s:7Lockman0A23DynamicConditionReducerV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa"},{"kind":"text","text":">"}]},"references":{"doc://Lockman/documentation/Lockman/LockmanReducer/lock(condition:boundaryId:lockFailure:)":{"title":"lock(condition:boundaryId:lockFailure:)","kind":"symbol","role":"symbol","type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer\/lock(condition:boundaryId:lockFailure:)","abstract":[{"type":"text","text":"Applies dynamic lock management to this reducer with conditional evaluation."}],"url":"\/documentation\/lockman\/lockmanreducer\/lock(condition:boundaryid:lockfailure:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"lock"},{"kind":"text","text":"("},{"kind":"externalParam","text":"condition"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa","kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:7Lockman0A14StrategyResultO","kind":"typeIdentifier","text":"LockmanStrategyResult"},{"kind":"text","text":", "},{"kind":"externalParam","text":"boundaryId"},{"kind":"text","text":": any "},{"preciseIdentifier":"s:7Lockman0A10BoundaryIda","kind":"typeIdentifier","text":"LockmanBoundaryId"},{"kind":"text","text":", "},{"kind":"externalParam","text":"lockFailure"},{"kind":"text","text":": ((any "},{"preciseIdentifier":"s:s5ErrorP","kind":"typeIdentifier","text":"Error"},{"kind":"text","text":", "},{"preciseIdentifier":"s:22ComposableArchitecture4SendV","kind":"typeIdentifier","text":"Send"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:s4Voida","kind":"typeIdentifier","text":"Void"},{"kind":"text","text":")?) -> "},{"preciseIdentifier":"s:7Lockman0A23DynamicConditionReducerV","kind":"typeIdentifier","text":"LockmanDynamicConditionReducer"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa","kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">"}]},"doc://Lockman/documentation/Lockman/LockmanStrategyResult":{"navigatorTitle":[{"text":"LockmanStrategyResult","kind":"identifier"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanStrategyResult","abstract":[{"type":"text","text":"The result of checking lock feasibility (used by strategy canLock methods)."}],"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanStrategyResult","kind":"identifier"}],"kind":"symbol","url":"\/documentation\/lockman\/lockmanstrategyresult","title":"LockmanStrategyResult","role":"symbol","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer":{"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"type":"topic","navigatorTitle":[{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","abstract":[{"type":"text","text":"A reducer that wraps another reducer with dynamic condition evaluation capabilities."}],"title":"LockmanDynamicConditionReducer","url":"\/documentation\/lockman\/lockmandynamicconditionreducer","kind":"symbol"},"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","kind":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman","abstract":[{"text":"Elegant exclusive control for user actions in The Composable Architecture applications.","type":"text"}],"role":"collection","title":"Lockman","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanBoundaryId":{"url":"\/documentation\/lockman\/lockmanboundaryid","title":"LockmanBoundaryId","role":"symbol","navigatorTitle":[{"text":"LockmanBoundaryId","kind":"identifier"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanBoundaryId","abstract":[{"text":"A protocol composition for boundary identifiers used by Lockman strategies.","type":"text"}],"fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanBoundaryId","kind":"identifier"}],"kind":"symbol","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanReducer":{"role":"symbol","title":"LockmanReducer","navigatorTitle":[{"text":"LockmanReducer","kind":"identifier"}],"kind":"symbol","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanReducer","kind":"identifier"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer","url":"\/documentation\/lockman\/lockmanreducer","abstract":[{"text":"A reducer wrapper that applies Lockman locking with true lock-first behavior.","type":"text"}]},"doc://Lockman/documentation/Lockman/LockmanReducer/Reducer-Implementations":{"role":"collectionGroup","title":"Reducer Implementations","kind":"article","type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanReducer\/Reducer-Implementations","url":"\/documentation\/lockman\/lockmanreducer\/reducer-implementations","abstract":[]}}}