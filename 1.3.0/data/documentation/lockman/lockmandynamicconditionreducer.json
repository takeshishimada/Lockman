{"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"},{"text":"<","kind":"text"},{"text":"State","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Action","kind":"genericParameter"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","preciseIdentifier":"s:s8SendableP","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"Sendable","preciseIdentifier":"s:s8SendableP","kind":"typeIdentifier"}],"languages":["swift"]}]},{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"overview"},{"inlineContent":[{"type":"codeVoice","code":"LockmanDynamicConditionReducer"},{"type":"text","text":" enables dynamic lock condition evaluation based on the current state and action,"},{"type":"text","text":" "},{"type":"text","text":"allowing for fine-grained control over when locks should be acquired."}],"type":"paragraph"},{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"inlineContent":[{"type":"text","text":"This reducer provides two levels of lock condition control:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Reducer-level"}],"type":"strong"},{"text":": Optional condition specified at initialization that applies to all actions","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Action-level","type":"text"}],"type":"strong"},{"text":": Optional condition specified per ","type":"text"},{"type":"codeVoice","code":"lock"},{"text":" call for specific actions","type":"text"}]}]}],"type":"unorderedList"},{"text":"Usage Examples","type":"heading","level":2,"anchor":"Usage-Examples"},{"text":"With method chain API","type":"heading","level":3,"anchor":"With-method-chain-API"},{"type":"codeListing","syntax":"swift","code":["var body: some ReducerOf<Self> {","  Reduce { state, action in","    switch action {","    case .fetchData:","      return self.lock(","        state: state,","        action: action,","        operation: { send in","          \/\/ Async operation","        },","        lockAction: FetchAction(),","        boundaryId: CancelID.fetch","      )","    default:","      return .none","    }","  }","  .lock { state, action in","    \/\/ Evaluate state to determine if lock should be acquired","    guard state.isEnabled else {","      return .cancel(MyError.featureDisabled)","    }","    return .success","  }","}"]},{"text":"Combined conditions with method chain","type":"heading","level":3,"anchor":"Combined-conditions-with-method-chain"},{"type":"codeListing","syntax":"swift","code":["var body: some ReducerOf<Self> {","  Reduce { state, action in","    switch action {","    case .purchase(let amount):","      return self.lock(","        state: state,","        action: action,","        operation: { send in","          \/\/ Purchase operation","        },","        lockAction: PurchaseAction(),","        boundaryId: CancelID.payment,","        lockCondition: { state, _ in","          \/\/ Action-level condition","          guard state.balance >= amount else {","            return .cancel(MyError.insufficientBalance(required: amount, available: state.balance))","          }","          return .success","        }","      )","    default:","      return .none","    }","  }","  .lock { state, _ in","    \/\/ Reducer-level condition","    guard state.isLoggedIn else {","      return .cancel(MyError.notAuthenticated)","    }","    return .success","  }","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"abstract":[{"text":"A reducer that wraps another reducer with dynamic lock evaluation capabilities.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman"]]},"topicSections":[{"generated":true,"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:lockCondition:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:lockCondition:)"],"title":"Initializers","anchor":"Initializers"},{"generated":true,"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:unlockOption:handleCancellationErrors:operation:catch:lockFailure:lockAction:boundaryId:lockCondition:fileID:filePath:line:column:)","doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)"],"title":"Instance Methods","anchor":"Instance-Methods"},{"generated":true,"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations"],"title":"Default Implementations","anchor":"Default-Implementations"}],"kind":"symbol","metadata":{"title":"LockmanDynamicConditionReducer","symbolKind":"struct","navigatorTitle":[{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"externalID":"s:7Lockman0A23DynamicConditionReducerV","role":"symbol","modules":[{"name":"Lockman"}],"roleHeading":"Structure"},"identifier":{"url":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer","interfaceLanguage":"swift"},"relationshipsSections":[{"kind":"relationships","identifiers":["doc:\/\/Lockman\/22ComposableArchitecture7ReducerP"],"title":"Conforms To","type":"conformsTo"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/lockman\/lockmandynamicconditionreducer"]}],"references":{"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"title":"LockmanDynamicConditionReducer","url":"\/documentation\/lockman\/lockmandynamicconditionreducer","role":"symbol","abstract":[{"text":"A reducer that wraps another reducer with dynamic lock evaluation capabilities.","type":"text"}],"kind":"symbol","navigatorTitle":[{"text":"LockmanDynamicConditionReducer","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/lock(state:action:priority:unlockOption:handleCancellationErrors:operation:catch:lockFailure:lockAction:boundaryId:lockCondition:fileID:filePath:line:column:)":{"conformance":{"conformancePrefix":[{"type":"text","text":"Conforms when"}],"constraints":[{"type":"codeVoice","code":"State"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Action"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":"."}],"availabilityPrefix":[{"type":"text","text":"Available when"}]},"title":"lock(state:action:priority:unlockOption:handleCancellationErrors:operation:catch:lockFailure:lockAction:boundaryId:lockCondition:fileID:filePath:line:column:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"lock","kind":"identifier"},{"text":"<","kind":"text"},{"text":"B","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"LA","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"state","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"action","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"priority","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"TaskPriority","kind":"typeIdentifier","preciseIdentifier":"s:ScP"},{"text":"?, ","kind":"text"},{"text":"unlockOption","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"LockmanUnlockOption","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A12UnlockOptionO"},{"text":"?, ","kind":"text"},{"text":"handleCancellationErrors","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"text":"?, ","kind":"text"},{"text":"operation","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"Send","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":", ","kind":"text"},{"text":"catch","kind":"externalParam"},{"text":": ((any ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":", ","kind":"text"},{"text":"Send","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")?, ","kind":"text"},{"text":"lockFailure","kind":"externalParam"},{"text":": ((any ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":", ","kind":"text"},{"text":"Send","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"text":")?, ","kind":"text"},{"text":"lockAction","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"LA","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"boundaryId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"B","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"lockCondition","kind":"externalParam"},{"text":": ((","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"LockmanResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO"},{"text":")?, ","kind":"text"},{"text":"fileID","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"StaticString","kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV"},{"text":", ","kind":"text"},{"text":"filePath","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"StaticString","kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV"},{"text":", ","kind":"text"},{"text":"line","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"UInt","kind":"typeIdentifier","preciseIdentifier":"s:Su"},{"text":", ","kind":"text"},{"text":"column","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"UInt","kind":"typeIdentifier","preciseIdentifier":"s:Su"},{"text":") -> ","kind":"text"},{"text":"Effect","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">","kind":"text"}],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/lock(state:action:priority:unlockoption:handlecancellationerrors:operation:catch:lockfailure:lockaction:boundaryid:lockcondition:fileid:filepath:line:column:)","kind":"symbol","role":"symbol","abstract":[{"text":"Creates an effect with automatic lock management and dynamic condition evaluation.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/lock(state:action:priority:unlockOption:handleCancellationErrors:operation:catch:lockFailure:lockAction:boundaryId:lockCondition:fileID:filePath:line:column:)","type":"topic"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/reduce(into:action:)":{"title":"reduce(into:action:)","kind":"symbol","abstract":[],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reduce(into:action:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"reduce","kind":"identifier"},{"text":"(","kind":"text"},{"text":"into","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"action","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Effect","preciseIdentifier":"s:22ComposableArchitecture6EffectV","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">","kind":"text"}],"role":"symbol","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/reduce(into:action:)","type":"topic"},"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","role":"collection","kind":"symbol","type":"topic","abstract":[{"text":"A library to implement exclusive control of user actions in application development using TCA.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman","title":"Lockman"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(_:lockCondition:)":{"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(_:lockcondition:)","abstract":[{"type":"text","text":"Initializes a reducer with optional lock condition evaluation."}],"type":"topic","kind":"symbol","title":"init(_:lockCondition:)","role":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"((","kind":"text"},{"text":"inout","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Effect","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"lockCondition","kind":"externalParam"},{"text":": ((","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"LockmanResult","kind":"typeIdentifier","preciseIdentifier":"s:7Lockman0A6ResultO"},{"text":")?)","kind":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(_:lockCondition:)"},"doc://Lockman/22ComposableArchitecture7ReducerP":{"identifier":"doc:\/\/Lockman\/22ComposableArchitecture7ReducerP","title":"ComposableArchitecture.Reducer","type":"unresolvable"},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/Reducer-Implementations":{"kind":"article","role":"collectionGroup","title":"Reducer Implementations","url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/reducer-implementations","type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/Reducer-Implementations","abstract":[]},"doc://Lockman/documentation/Lockman/LockmanDynamicConditionReducer/init(base:lockCondition:)":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/LockmanDynamicConditionReducer\/init(base:lockCondition:)","title":"init(base:lockCondition:)","kind":"symbol","abstract":[{"text":"Initializes with an existing Reduce instance.","type":"text"}],"url":"\/documentation\/lockman\/lockmandynamicconditionreducer\/init(base:lockcondition:)","role":"symbol","type":"topic","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"base"},{"kind":"text","text":": "},{"preciseIdentifier":"s:22ComposableArchitecture6ReduceV","kind":"typeIdentifier","text":"Reduce"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"lockCondition"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Action"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:7Lockman0A6ResultO","kind":"typeIdentifier","text":"LockmanResult"},{"kind":"text","text":")?)"}]}}}