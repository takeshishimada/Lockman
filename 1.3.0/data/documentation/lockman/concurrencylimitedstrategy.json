{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Lockman\/documentation\/Lockman\/ConcurrencyLimitedStrategy"},"primaryContentSections":[{"content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"ConcurrencyLimitedStrategyは、同時実行数を制限する戦略です。指定した数まで同時実行を許可し、制限を超える場合は実行を拒否することで、リソース使用量の制御とパフォーマンスの最適化を実現します。"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"この戦略は、ネットワークリクエストやファイル処理など、リソース消費の大きい処理の並行度制御に使用されます。"}]},{"anchor":"%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E5%88%B6%E9%99%90%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0","level":2,"type":"heading","text":"同時実行制限システム"},{"anchor":"%E5%88%B6%E9%99%90%E3%82%BF%E3%82%A4%E3%83%97","level":3,"type":"heading","text":"制限タイプ"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"unlimited"}],"type":"strong"},{"type":"text","text":" - 制限なし"}]},{"type":"codeListing","code":["LockmanConcurrencyLimitedInfo(","    actionId: \"backgroundTask\",","    concurrencyId: \"background\",","    limit: .unlimited",")"],"syntax":"swift"},{"items":[{"content":[{"inlineContent":[{"text":"同時実行数に制限を設けない","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"一時的に制限を無効化したい場合に使用"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"デバッグやテスト時の動作確認に適用"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"limited"}],"type":"strong"},{"text":" - 数値制限","type":"text"}]},{"type":"codeListing","code":["LockmanConcurrencyLimitedInfo(","    actionId: \"download\",","    concurrencyId: \"downloads\", ","    limit: .limited(3)",")"],"syntax":"swift"},{"items":[{"content":[{"inlineContent":[{"text":"指定した数まで同時実行を許可","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"制限を超える処理は拒否される"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"リソース保護とパフォーマンス最適化","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97","level":3,"type":"heading","text":"同時実行グループ"},{"type":"paragraph","inlineContent":[{"text":"同じ","type":"text"},{"type":"codeVoice","code":"concurrencyId"},{"text":"を持つ処理が同一グループとして管理され、グループ単位で同時実行数が制限されます。","type":"text"}]},{"type":"codeListing","code":["\/\/ 同じグループ「downloads」として管理","LockmanConcurrencyLimitedInfo(","    actionId: \"downloadImage\",","    concurrencyId: \"downloads\",","    limit: .limited(3)",")","","LockmanConcurrencyLimitedInfo(","    actionId: \"downloadVideo\", ","    concurrencyId: \"downloads\",","    limit: .limited(3)",")"],"syntax":"swift"},{"anchor":"%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95","level":2,"type":"heading","text":"使用方法"},{"anchor":"%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E7%94%A8%E4%BE%8B","level":3,"type":"heading","text":"基本的な使用例"},{"type":"codeListing","code":["@LockmanConcurrencyLimited","enum ViewAction {","    case downloadFile(URL)","    case uploadFile(URL)","    case processImage(UIImage)","    ","    var lockmanInfo: LockmanConcurrencyLimitedInfo {","        switch self {","        case .downloadFile:","            return LockmanConcurrencyLimitedInfo(","                actionId: actionName,","                concurrencyId: \"network\",","                limit: .limited(3)","            )","        case .uploadFile:","            return LockmanConcurrencyLimitedInfo(","                actionId: actionName,","                concurrencyId: \"network\", ","                limit: .limited(3)","            )","        case .processImage:","            return LockmanConcurrencyLimitedInfo(","                actionId: actionName,","                concurrencyId: \"imageProcessing\",","                limit: .limited(2)","            )","        }","    }","}"],"syntax":"swift"},{"anchor":"%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E5%88%A5%E5%88%B6%E9%99%90%E8%A8%AD%E5%AE%9A","level":3,"type":"heading","text":"グループ別制限設定"},{"type":"codeListing","code":["\/\/ ネットワーク関連: 最大3つまで","LockmanConcurrencyLimitedInfo(","    actionId: \"apiCall\",","    concurrencyId: \"network\",","    limit: .limited(3)",")","","\/\/ 画像処理: 最大2つまで  ","LockmanConcurrencyLimitedInfo(","    actionId: \"imageResize\",","    concurrencyId: \"imageProcessing\", ","    limit: .limited(2)",")","","\/\/ バックグラウンドタスク: 制限なし","LockmanConcurrencyLimitedInfo(","    actionId: \"logging\",","    concurrencyId: \"background\",","    limit: .unlimited",")"],"syntax":"swift"},{"anchor":"%E5%8B%95%E4%BD%9C%E4%BE%8B","level":2,"type":"heading","text":"動作例"},{"anchor":"%E5%88%B6%E9%99%90%E3%81%AB%E3%82%88%E3%82%8B%E5%AE%9F%E8%A1%8C%E5%88%B6%E5%BE%A1","level":3,"type":"heading","text":"制限による実行制御"},{"type":"codeListing","code":["制限数: 3","同時実行グループ: \"downloads\"","","時刻: 0秒  - download1要求 → ✅ 実行 (1\/3)","時刻: 1秒  - download2要求 → ✅ 実行 (2\/3)  ","時刻: 2秒  - download3要求 → ✅ 実行 (3\/3)","時刻: 3秒  - download4要求 → ❌ 拒否 (制限到達)","時刻: 4秒  - download1完了 → ✅ 完了 (2\/3)","時刻: 5秒  - download5要求 → ✅ 実行 (3\/3)"],"syntax":null},{"anchor":"%E7%95%B0%E3%81%AA%E3%82%8B%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%81%A7%E3%81%AE%E7%8B%AC%E7%AB%8B%E5%88%B6%E5%BE%A1","level":3,"type":"heading","text":"異なるグループでの独立制御"},{"type":"codeListing","code":["ネットワークグループ (制限: 3)","時刻: 0秒  - api1実行, api2実行, api3実行 → ✅ (3\/3)","時刻: 1秒  - api4要求 → ❌ 拒否","","画像処理グループ (制限: 2)  ","時刻: 0秒  - resize1実行, resize2実行 → ✅ (2\/2)","時刻: 1秒  - resize3要求 → ❌ 拒否","","※ 異なるグループは独立して制御される"],"syntax":null},{"anchor":"%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0","level":2,"type":"heading","text":"エラーハンドリング"},{"type":"paragraph","inlineContent":[{"text":"ConcurrencyLimitedStrategyで発生する可能性のあるエラーと、その対処法については","type":"text"},{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/ErrorHandling","overridingTitleInlineContent":[{"text":"Error Handling","type":"text"}],"isActive":true,"overridingTitle":"Error Handling","type":"reference"},{"text":"ページの共通パターンも参照してください。","type":"text"}]},{"anchor":"LockmanConcurrencyLimitedCancellationError","level":3,"type":"heading","text":"LockmanConcurrencyLimitedCancellationError"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This error conforms to "},{"type":"codeVoice","code":"LockmanCancellationError"},{"type":"text","text":" protocol and provides:"}]},{"items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"cancelledInfo"},{"type":"text","text":": Information about the cancelled action"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"boundaryId","type":"codeVoice"},{"text":": Where the cancellation occurred","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"existingInfos"},{"type":"text","text":": Array of currently active infos"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"currentCount"},{"text":": Current number of active executions","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","code":["lockFailure: { error, send in","    if let concurrencyError = error as? LockmanConcurrencyLimitedCancellationError {","        let limit = concurrencyError.cancelledInfo.limit","        let current = concurrencyError.currentCount","        await send(.concurrencyLimitReached(","            \"同時実行制限に到達しました (\\(current)\/\\(limit))\"","        ))","    }","}"],"syntax":"swift"}],"kind":"content"}],"sections":[],"kind":"article","schemaVersion":{"patch":0,"minor":3,"major":0},"abstract":[{"text":"Limit the number of concurrent executions.","type":"text"}],"metadata":{"modules":[{"name":"Lockman"}],"title":"ConcurrencyLimitedStrategy","role":"article","roleHeading":"Article"},"hierarchy":{"paths":[["doc:\/\/Lockman\/documentation\/Lockman"]]},"seeAlsoSections":[{"identifiers":["doc:\/\/Lockman\/documentation\/Lockman\/SingleExecutionStrategy","doc:\/\/Lockman\/documentation\/Lockman\/PriorityBasedStrategy","doc:\/\/Lockman\/documentation\/Lockman\/GroupCoordinationStrategy","doc:\/\/Lockman\/documentation\/Lockman\/DynamicConditionStrategy","doc:\/\/Lockman\/documentation\/Lockman\/CompositeStrategy"],"generated":true,"title":"Strategies","anchor":"Strategies"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/lockman\/concurrencylimitedstrategy"]}],"references":{"doc://Lockman/documentation/Lockman/SingleExecutionStrategy":{"kind":"article","role":"article","url":"\/documentation\/lockman\/singleexecutionstrategy","type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/SingleExecutionStrategy","abstract":[{"type":"text","text":"Prevent duplicate execution of the same action."}],"title":"SingleExecutionStrategy"},"doc://Lockman/documentation/Lockman/DynamicConditionStrategy":{"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/DynamicConditionStrategy","url":"\/documentation\/lockman\/dynamicconditionstrategy","abstract":[{"type":"text","text":"Control actions based on runtime conditions."}],"title":"DynamicConditionStrategy","type":"topic","kind":"article","role":"article"},"doc://Lockman/documentation/Lockman/PriorityBasedStrategy":{"role":"article","title":"PriorityBasedStrategy","abstract":[{"type":"text","text":"Control action execution based on priority levels."}],"type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/PriorityBasedStrategy","kind":"article","url":"\/documentation\/lockman\/prioritybasedstrategy"},"doc://Lockman/documentation/Lockman/GroupCoordinationStrategy":{"role":"article","title":"GroupCoordinationStrategy","abstract":[{"type":"text","text":"Coordinate actions through leader\/member group roles."}],"type":"topic","identifier":"doc:\/\/Lockman\/documentation\/Lockman\/GroupCoordinationStrategy","kind":"article","url":"\/documentation\/lockman\/groupcoordinationstrategy"},"doc://Lockman/documentation/Lockman/ErrorHandling":{"title":"Error Handling","url":"\/documentation\/lockman\/errorhandling","role":"article","kind":"article","type":"topic","abstract":[{"text":"Learn about common error handling patterns in Lockman.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/ErrorHandling"},"doc://Lockman/documentation/Lockman/CompositeStrategy":{"abstract":[{"type":"text","text":"Combine multiple strategies for complex control scenarios."}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman\/CompositeStrategy","role":"article","type":"topic","url":"\/documentation\/lockman\/compositestrategy","kind":"article","title":"CompositeStrategy"},"doc://Lockman/documentation/Lockman":{"url":"\/documentation\/lockman","role":"collection","kind":"symbol","type":"topic","abstract":[{"text":"A library to implement exclusive control of user actions in application development using TCA.","type":"text"}],"identifier":"doc:\/\/Lockman\/documentation\/Lockman","title":"Lockman"}}}